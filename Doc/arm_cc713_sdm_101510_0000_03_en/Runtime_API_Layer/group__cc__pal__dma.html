<!-- HTML header for doxygen 1.8.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<title>Arm® CryptoCell™-713 Software Developers Manual: CryptoCell PAL DMA related APIs</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="arm_sip_html.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="arm_logo.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">Arm® CryptoCell™-713 Software Developers Manual
   &#160;<span id="projectnumber">r0p0</span>
   </div>
   <div id="projectbrief">Runtime API Layer</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('group__cc__pal__dma.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">CryptoCell PAL DMA related APIs<div class="ingroups"><a class="el" href="group__cc__pal.html">PAL related APIs and definitions</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>Contains definitions that are used for DMA-related APIs.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_c_c_pal_dma_block_info__t.html">CCPalDmaBlockInfo_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">User buffer scatter information.  <a href="struct_c_c_pal_dma_block_info__t.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ga16d6b0eca1858639302c4f84fbddf6a4"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__cc__pal__dma.html#ga16d6b0eca1858639302c4f84fbddf6a4">SET_WORD_LE</a></td></tr>
<tr class="separator:ga16d6b0eca1858639302c4f84fbddf6a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:ga596360eac5b06d1906cd6d133a4818e7"><td class="memItemLeft" align="right" valign="top">typedef void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__cc__pal__dma.html#ga596360eac5b06d1906cd6d133a4818e7">CC_PalDmaBufferHandle</a></td></tr>
<tr class="separator:ga596360eac5b06d1906cd6d133a4818e7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:gab18623553e5be03b9501b1aed68b2073"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__cc__pal__dma.html#gab18623553e5be03b9501b1aed68b2073">CCPalDmaBufferDirection_t</a> { <br />
&#160;&#160;<a class="el" href="group__cc__pal__dma.html#ggab18623553e5be03b9501b1aed68b2073a6c075a85f4438534a537b7f674cde22f">CC_PAL_DMA_DIR_NONE</a> = 0, 
<a class="el" href="group__cc__pal__dma.html#ggab18623553e5be03b9501b1aed68b2073ab622ac585f3648b860bb0f09f572a8fd">CC_PAL_DMA_DIR_TO_DEVICE</a> = 1, 
<a class="el" href="group__cc__pal__dma.html#ggab18623553e5be03b9501b1aed68b2073a31fc6c45a1cf6cba799c19559dd32170">CC_PAL_DMA_DIR_FROM_DEVICE</a> = 2, 
<a class="el" href="group__cc__pal__dma.html#ggab18623553e5be03b9501b1aed68b2073ac7a1c697d1ad501bdc9e0eacace51df9">CC_PAL_DMA_DIR_BI_DIRECTION</a> = 3, 
<br />
&#160;&#160;<a class="el" href="group__cc__pal__dma.html#ggab18623553e5be03b9501b1aed68b2073ab21a0b91ca8f74029aaec03836bc5aba">CC_PAL_DMA_DIR_MAX</a>, 
<a class="el" href="group__cc__pal__dma.html#ggab18623553e5be03b9501b1aed68b2073a4a67bc18e4a7d4da06e449c18378dba9">CC_PAL_DMA_DIR_RESERVE32</a> = 0x7FFFFFFF
<br />
 }</td></tr>
<tr class="separator:gab18623553e5be03b9501b1aed68b2073"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gaa190a919df12c3b1bd351f9ba7424673"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__cc__pal__dma.html#gaa190a919df12c3b1bd351f9ba7424673">CC_PalDmaBufferMap</a> (uint8_t *pDataBuffer, uint32_t buffSize, <a class="el" href="group__cc__pal__dma.html#gab18623553e5be03b9501b1aed68b2073">CCPalDmaBufferDirection_t</a> copyDirection, uint32_t *pNumOfBlocks, <a class="el" href="struct_c_c_pal_dma_block_info__t.html">CCPalDmaBlockInfo_t</a> *pDmaBlockList, <a class="el" href="group__cc__pal__dma.html#ga596360eac5b06d1906cd6d133a4818e7">CC_PalDmaBufferHandle</a> *dmaBuffHandle)</td></tr>
<tr class="memdesc:gaa190a919df12c3b1bd351f9ba7424673"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function is called by the CryptoCell runtime library before the HW is used. It maps a given data buffer (virtual address) for CryptoCell HW DMA use (physical address), and returns the list of one or more DMA-able (physical) blocks. Once it is called, only CryptoCell HW access to the buffer is allowed, until it is unmapped.  <a href="#gaa190a919df12c3b1bd351f9ba7424673">More...</a><br /></td></tr>
<tr class="separator:gaa190a919df12c3b1bd351f9ba7424673"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa2c127aa611138c9df47260c0f96f795"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__cc__pal__dma.html#gaa2c127aa611138c9df47260c0f96f795">CC_PalDmaBufferUnmap</a> (uint8_t *pDataBuffer, uint32_t buffSize, <a class="el" href="group__cc__pal__dma.html#gab18623553e5be03b9501b1aed68b2073">CCPalDmaBufferDirection_t</a> copyDirection, uint32_t numOfBlocks, <a class="el" href="struct_c_c_pal_dma_block_info__t.html">CCPalDmaBlockInfo_t</a> *pDmaBlockList, <a class="el" href="group__cc__pal__dma.html#ga596360eac5b06d1906cd6d133a4818e7">CC_PalDmaBufferHandle</a> dmaBuffHandle)</td></tr>
<tr class="memdesc:gaa2c127aa611138c9df47260c0f96f795"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function is called by the CryptoCell runtime library after the HW is used. It unmaps a given buffer and frees its associated resources, if needed. It may unlock the buffer and flush it for CPU use. Once it is called, CryptoCell HW does not require any further access to this buffer.  <a href="#gaa2c127aa611138c9df47260c0f96f795">More...</a><br /></td></tr>
<tr class="separator:gaa2c127aa611138c9df47260c0f96f795"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga87d5b39787cd67e0b5c64e45311ac2c8"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__cc__pal__dma.html#ga87d5b39787cd67e0b5c64e45311ac2c8">CC_PalDmaContigBufferAllocate</a> (uint32_t buffSize, uint8_t **ppVirtBuffAddr)</td></tr>
<tr class="memdesc:ga87d5b39787cd67e0b5c64e45311ac2c8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allocates a DMA-contiguous buffer for CPU use, and returns its virtual address. Before passing the buffer to the CryptoCell HW, <a class="el" href="group__cc__pal__dma.html#gaa190a919df12c3b1bd351f9ba7424673" title="This function is called by the CryptoCell runtime library before the HW is used. It maps a given data...">CC_PalDmaBufferMap</a> should be called.  <a href="#ga87d5b39787cd67e0b5c64e45311ac2c8">More...</a><br /></td></tr>
<tr class="separator:ga87d5b39787cd67e0b5c64e45311ac2c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaef33b7c380373f30f9dd417bc1b68e59"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__cc__pal__dma.html#gaef33b7c380373f30f9dd417bc1b68e59">CC_PalDmaContigBufferFree</a> (uint32_t buffSize, uint8_t *pVirtBuffAddr)</td></tr>
<tr class="memdesc:gaef33b7c380373f30f9dd417bc1b68e59"><td class="mdescLeft">&#160;</td><td class="mdescRight">Frees resources previously allocated by <a class="el" href="group__cc__pal__dma.html#ga87d5b39787cd67e0b5c64e45311ac2c8" title="Allocates a DMA-contiguous buffer for CPU use, and returns its virtual address. Before passing the bu...">CC_PalDmaContigBufferAllocate</a>.  <a href="#gaef33b7c380373f30f9dd417bc1b68e59">More...</a><br /></td></tr>
<tr class="separator:gaef33b7c380373f30f9dd417bc1b68e59"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0e6066a3c6665211190b9b8a671ede8b"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__cc__pal__dma.html#ga0e6066a3c6665211190b9b8a671ede8b">CC_PalIsDmaBufferContiguous</a> (uint8_t *pDataBuffer, uint32_t buffSize)</td></tr>
<tr class="memdesc:ga0e6066a3c6665211190b9b8a671ede8b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks whether the buffer is guaranteed to be a single contiguous DMA block.  <a href="#ga0e6066a3c6665211190b9b8a671ede8b">More...</a><br /></td></tr>
<tr class="separator:ga0e6066a3c6665211190b9b8a671ede8b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Contains definitions that are used for DMA-related APIs. </p>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="ga16d6b0eca1858639302c4f84fbddf6a4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga16d6b0eca1858639302c4f84fbddf6a4">&#9670;&nbsp;</a></span>SET_WORD_LE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SET_WORD_LE</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This macro transforms a word from big-endian to little-endian. </p>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="ga596360eac5b06d1906cd6d133a4818e7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga596360eac5b06d1906cd6d133a4818e7">&#9670;&nbsp;</a></span>CC_PalDmaBufferHandle</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void* <a class="el" href="group__cc__pal__dma.html#ga596360eac5b06d1906cd6d133a4818e7">CC_PalDmaBufferHandle</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Definition for DMA buffer handle. </p>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="gab18623553e5be03b9501b1aed68b2073"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab18623553e5be03b9501b1aed68b2073">&#9670;&nbsp;</a></span>CCPalDmaBufferDirection_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group__cc__pal__dma.html#gab18623553e5be03b9501b1aed68b2073">CCPalDmaBufferDirection_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>DMA directions configuration. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="ggab18623553e5be03b9501b1aed68b2073a6c075a85f4438534a537b7f674cde22f"></a>CC_PAL_DMA_DIR_NONE&#160;</td><td class="fielddoc"><p>No direction. </p>
</td></tr>
<tr><td class="fieldname"><a id="ggab18623553e5be03b9501b1aed68b2073ab622ac585f3648b860bb0f09f572a8fd"></a>CC_PAL_DMA_DIR_TO_DEVICE&#160;</td><td class="fielddoc"><p>The original buffer is the input to the operation. It should be copied or mapped to the temporary buffer prior to activating the HW on it. </p>
</td></tr>
<tr><td class="fieldname"><a id="ggab18623553e5be03b9501b1aed68b2073a31fc6c45a1cf6cba799c19559dd32170"></a>CC_PAL_DMA_DIR_FROM_DEVICE&#160;</td><td class="fielddoc"><p>The temporary buffer holds the output of the HW. This API should copy or map it to the original output buffer. </p>
</td></tr>
<tr><td class="fieldname"><a id="ggab18623553e5be03b9501b1aed68b2073ac7a1c697d1ad501bdc9e0eacace51df9"></a>CC_PAL_DMA_DIR_BI_DIRECTION&#160;</td><td class="fielddoc"><p>The result is written over the original data at the same address. Should be treated as <code>CC_PAL_DMA_DIR_TO_DEVICE</code> and <code>CC_PAL_DMA_DIR_FROM_DEVICE</code>. </p>
</td></tr>
<tr><td class="fieldname"><a id="ggab18623553e5be03b9501b1aed68b2073ab21a0b91ca8f74029aaec03836bc5aba"></a>CC_PAL_DMA_DIR_MAX&#160;</td><td class="fielddoc"><p>Maximal DMA direction options. </p>
</td></tr>
<tr><td class="fieldname"><a id="ggab18623553e5be03b9501b1aed68b2073a4a67bc18e4a7d4da06e449c18378dba9"></a>CC_PAL_DMA_DIR_RESERVE32&#160;</td><td class="fielddoc"><p>Reserved. </p>
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="gaa190a919df12c3b1bd351f9ba7424673"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa190a919df12c3b1bd351f9ba7424673">&#9670;&nbsp;</a></span>CC_PalDmaBufferMap()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t CC_PalDmaBufferMap </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>pDataBuffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>buffSize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__cc__pal__dma.html#gab18623553e5be03b9501b1aed68b2073">CCPalDmaBufferDirection_t</a>&#160;</td>
          <td class="paramname"><em>copyDirection</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t *&#160;</td>
          <td class="paramname"><em>pNumOfBlocks</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_c_c_pal_dma_block_info__t.html">CCPalDmaBlockInfo_t</a> *&#160;</td>
          <td class="paramname"><em>pDmaBlockList</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__cc__pal__dma.html#ga596360eac5b06d1906cd6d133a4818e7">CC_PalDmaBufferHandle</a> *&#160;</td>
          <td class="paramname"><em>dmaBuffHandle</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function is called by the CryptoCell runtime library before the HW is used. It maps a given data buffer (virtual address) for CryptoCell HW DMA use (physical address), and returns the list of one or more DMA-able (physical) blocks. Once it is called, only CryptoCell HW access to the buffer is allowed, until it is unmapped. </p>
<dl class="section note"><dt>Note</dt><dd>If the data buffer was already mapped by the Secure OS prior to calling the CryptoCell runtime library, this API does not have to perform any actual mapping operation, but only return the list of DMA-able blocks.</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>A non-zero value in case of failure. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">pDataBuffer</td><td>The address of the buffer to map. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">buffSize</td><td>The buffer size in Bytes. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">copyDirection</td><td>The copy direction of the buffer, according to <a class="el" href="group__cc__pal__dma.html#gab18623553e5be03b9501b1aed68b2073">CCPalDmaBufferDirection_t</a>: <ul>
<li>
TO_DEVICE - the original buffer is the input to the operation, and this function should copy it to the temporary buffer, prior to the activating the HW on the temporary buffer. </li>
<li>
FROM_DEVICE - not relevant for this API. </li>
<li>
BI_DIRECTION - used when the cryptographic operation is "in-place", that is, the result of encryption or decryption is written over the original data at the same address. Should be treated by this API same as TO_DEVICE. </li>
</ul>
</td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">pNumOfBlocks</td><td><ul>
<li>
In - The maximal number of blocks to fill.</li>
<li>
Out - the actual number of blocks.</li>
</ul>
</td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">pDmaBlockList</td><td>The list of DMA-able blocks that the buffer maps to. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">dmaBuffHandle</td><td>A handle to the private resources of the mapped buffer. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="gaa2c127aa611138c9df47260c0f96f795"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa2c127aa611138c9df47260c0f96f795">&#9670;&nbsp;</a></span>CC_PalDmaBufferUnmap()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t CC_PalDmaBufferUnmap </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>pDataBuffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>buffSize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__cc__pal__dma.html#gab18623553e5be03b9501b1aed68b2073">CCPalDmaBufferDirection_t</a>&#160;</td>
          <td class="paramname"><em>copyDirection</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>numOfBlocks</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_c_c_pal_dma_block_info__t.html">CCPalDmaBlockInfo_t</a> *&#160;</td>
          <td class="paramname"><em>pDmaBlockList</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__cc__pal__dma.html#ga596360eac5b06d1906cd6d133a4818e7">CC_PalDmaBufferHandle</a>&#160;</td>
          <td class="paramname"><em>dmaBuffHandle</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function is called by the CryptoCell runtime library after the HW is used. It unmaps a given buffer and frees its associated resources, if needed. It may unlock the buffer and flush it for CPU use. Once it is called, CryptoCell HW does not require any further access to this buffer. </p>
<dl class="section note"><dt>Note</dt><dd>If the data buffer was already unmapped by the secure OS prior to calling the CryptoCell runtime library, this API does not have to perform any unmapping operation, and the actual unmapping can be done by the secure OS outside the context of the CryptoCell runtime library. </dd></dl>
<dl class="section return"><dt>Returns</dt><dd>A non-zero value in case of failure. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">pDataBuffer</td><td>The address of the buffer to unmap. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">buffSize</td><td>The buffer size in Bytes. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">copyDirection</td><td>The copy direction of the buffer, according to <a class="el" href="group__cc__pal__dma.html#gab18623553e5be03b9501b1aed68b2073">CCPalDmaBufferDirection_t</a>: <ul>
<li>
TO_DEVICE - not relevant for this API.  </li>
<li>
FROM_DEVICE - the temporary buffer holds the output of the HW, and this API should copy it to the actual output buffer. </li>
<li>
BI_DIRECTION - used when the cryptographic operation is "in-place", that is, the result of encryption or decryption is written over the original data at the same address. Should be treated by this API same as FROM_DEVICE.</li>
</ul>
</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">numOfBlocks</td><td>The number of DMA-able blocks that the buffer maps to. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">pDmaBlockList</td><td>The list of DMA-able blocks that the buffer maps to. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">dmaBuffHandle</td><td>A handle to the private resources of the mapped buffer. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga87d5b39787cd67e0b5c64e45311ac2c8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga87d5b39787cd67e0b5c64e45311ac2c8">&#9670;&nbsp;</a></span>CC_PalDmaContigBufferAllocate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t CC_PalDmaContigBufferAllocate </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>buffSize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t **&#160;</td>
          <td class="paramname"><em>ppVirtBuffAddr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Allocates a DMA-contiguous buffer for CPU use, and returns its virtual address. Before passing the buffer to the CryptoCell HW, <a class="el" href="group__cc__pal__dma.html#gaa190a919df12c3b1bd351f9ba7424673" title="This function is called by the CryptoCell runtime library before the HW is used. It maps a given data...">CC_PalDmaBufferMap</a> should be called. </p>
<dl class="section note"><dt>Note</dt><dd>The returned address must be aligned to 32bits.</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>A non-zero value in case of failure. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">buffSize</td><td>The buffer size in Bytes. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">ppVirtBuffAddr</td><td>The virtual address of the allocated buffer. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="gaef33b7c380373f30f9dd417bc1b68e59"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaef33b7c380373f30f9dd417bc1b68e59">&#9670;&nbsp;</a></span>CC_PalDmaContigBufferFree()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t CC_PalDmaContigBufferFree </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>buffSize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>pVirtBuffAddr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Frees resources previously allocated by <a class="el" href="group__cc__pal__dma.html#ga87d5b39787cd67e0b5c64e45311ac2c8" title="Allocates a DMA-contiguous buffer for CPU use, and returns its virtual address. Before passing the bu...">CC_PalDmaContigBufferAllocate</a>. </p>
<dl class="section return"><dt>Returns</dt><dd>A non-zero value in case of failure. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">buffSize</td><td>The buffer size in Bytes. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">pVirtBuffAddr</td><td>The virtual address of the buffer to free. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga0e6066a3c6665211190b9b8a671ede8b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga0e6066a3c6665211190b9b8a671ede8b">&#9670;&nbsp;</a></span>CC_PalIsDmaBufferContiguous()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t CC_PalIsDmaBufferContiguous </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>pDataBuffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>buffSize</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Checks whether the buffer is guaranteed to be a single contiguous DMA block. </p>
<dl class="section return"><dt>Returns</dt><dd>TRUE if the buffer is guaranteed to be a single contiguous DMA block. </dd>
<dd>
FALSE otherwise. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">pDataBuffer</td><td>The address of the user buffer. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">buffSize</td><td>The size of the user buffer. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.9.1-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Copyright © 2001-2020 Arm Limited. All rights reserved. Non-Confidential.</li>
  </ul>
</div>
</body>
</html>
