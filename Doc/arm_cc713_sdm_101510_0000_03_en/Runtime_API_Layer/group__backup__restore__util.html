<!-- HTML header for doxygen 1.8.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<title>Arm® CryptoCell™-713 Software Developers Manual: CryptoCell utility backup and restore functions and definitions</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="arm_sip_html.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="arm_logo.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">Arm® CryptoCell™-713 Software Developers Manual
   &#160;<span id="projectnumber">r0p0</span>
   </div>
   <div id="projectbrief">Runtime API Layer</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('group__backup__restore__util.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">CryptoCell utility backup and restore functions and definitions<div class="ingroups"><a class="el" href="group__cc__utils.html">CryptoCell utility APIs</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>Contains CryptoCell utility backup and restore functions and definitions.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ga9caea2af028413df9a806d35ffd987d5"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__backup__restore__util.html#ga9caea2af028413df9a806d35ffd987d5">CC_UTIL_RAM_BACKUP</a>(srcAddr,  dstAddr,  blockSize)&#160;&#160;&#160;<a class="el" href="group__backup__restore__util.html#gabf644dc2e0ea262ddc4d72d416f3ee47">CC_UtilBackupAndRestore</a>(srcAddr, dstAddr, blockSize, <a class="el" href="group__cc__pal__types.html#gga7323bc031012d4ecc054f5ac4b9a1e76a286c1b1735c565b56145da9bd3e1f9fe">CC_TRUE</a>)</td></tr>
<tr class="memdesc:ga9caea2af028413df9a806d35ffd987d5"><td class="mdescLeft">&#160;</td><td class="mdescRight">This macro is used for power management. Use it upon entry to System-on-Chip suspended state, to perform Secure backup of on-chip Secure RAM to an off-chip DRAM. This backed-up data is encrypted and signed with the session key. The backup must be coupled with a matching restore operation when waking up from a suspended state. Restoring must be done to the exact same address that was backed up, with the exact same size that was backed up.  <a href="#ga9caea2af028413df9a806d35ffd987d5">More...</a><br /></td></tr>
<tr class="separator:ga9caea2af028413df9a806d35ffd987d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae1ad021208d54029d19852857ba8949d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__backup__restore__util.html#gae1ad021208d54029d19852857ba8949d">CC_UTIL_RAM_RESTORE</a>(srcAddr,  dstAddr,  blockSize)&#160;&#160;&#160;<a class="el" href="group__backup__restore__util.html#gabf644dc2e0ea262ddc4d72d416f3ee47">CC_UtilBackupAndRestore</a>(srcAddr, dstAddr, blockSize, <a class="el" href="group__cc__pal__types.html#gga7323bc031012d4ecc054f5ac4b9a1e76a6f15eba2bf45deaeaf625e9cad6492fa">CC_FALSE</a>)</td></tr>
<tr class="memdesc:gae1ad021208d54029d19852857ba8949d"><td class="mdescLeft">&#160;</td><td class="mdescRight">This macro is used for power management. Use it upon wakeup from suspended state, to restore the data that was backed up upon entry to suspended state. The source buffer is decrypted and verified with the session key. The restore operation must match a previous backup operation. Restoring must be done to the same address and with the same size that was previously backed up.  <a href="#gae1ad021208d54029d19852857ba8949d">More...</a><br /></td></tr>
<tr class="separator:gae1ad021208d54029d19852857ba8949d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gabf644dc2e0ea262ddc4d72d416f3ee47"><td class="memItemLeft" align="right" valign="top"><a class="el" href="cc__pal__types__plat_8h.html#a0524980129b7e5ec9d0998ddab83dd1a">CCError_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__backup__restore__util.html#gabf644dc2e0ea262ddc4d72d416f3ee47">CC_UtilBackupAndRestore</a> (uint8_t *pSrcBuff, uint8_t *pDstBuff, size_t blockSize, <a class="el" href="cc__pal__types__plat_8h.html#a6dcfa1fccae81f1dcfefe3229df69b6c">CCBool_t</a> isSramBackup)</td></tr>
<tr class="memdesc:gabf644dc2e0ea262ddc4d72d416f3ee47"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function performs backup or restore of memory buffer, according to the flag it is given. It should not be called directly, but only through the <code>CC_UTIL_RAM_BACKUP</code> and <code>CC_UTIL_RAM_RESTORE</code> macros.  <a href="#gabf644dc2e0ea262ddc4d72d416f3ee47">More...</a><br /></td></tr>
<tr class="separator:gabf644dc2e0ea262ddc4d72d416f3ee47"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Contains CryptoCell utility backup and restore functions and definitions. </p>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="ga9caea2af028413df9a806d35ffd987d5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga9caea2af028413df9a806d35ffd987d5">&#9670;&nbsp;</a></span>CC_UTIL_RAM_BACKUP</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CC_UTIL_RAM_BACKUP</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">srcAddr, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">dstAddr, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">blockSize&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;<a class="el" href="group__backup__restore__util.html#gabf644dc2e0ea262ddc4d72d416f3ee47">CC_UtilBackupAndRestore</a>(srcAddr, dstAddr, blockSize, <a class="el" href="group__cc__pal__types.html#gga7323bc031012d4ecc054f5ac4b9a1e76a286c1b1735c565b56145da9bd3e1f9fe">CC_TRUE</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This macro is used for power management. Use it upon entry to System-on-Chip suspended state, to perform Secure backup of on-chip Secure RAM to an off-chip DRAM. This backed-up data is encrypted and signed with the session key. The backup must be coupled with a matching restore operation when waking up from a suspended state. Restoring must be done to the exact same address that was backed up, with the exact same size that was backed up. </p>
<dl class="section note"><dt>Note</dt><dd>The session key must be initialized prior to using this API. </dd></dl>
<dl class="section user"><dt></dt><dd></dd></dl>
<dl class="section note"><dt>Note</dt><dd>The backup destination buffer should be 16 bytes bigger than the source buffer to accommodate the signature.</dd></dl>
<dl class="section return"><dt>Returns</dt><dd><code>CC_OK</code> on success. </dd>
<dd>
A non-zero value from <a class="el" href="cc__util__error_8h.html" title="This file contains the error definitions of the CryptoCell utility APIs.">cc_util_error.h</a> on failure. </dd></dl>

</div>
</div>
<a id="gae1ad021208d54029d19852857ba8949d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae1ad021208d54029d19852857ba8949d">&#9670;&nbsp;</a></span>CC_UTIL_RAM_RESTORE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CC_UTIL_RAM_RESTORE</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">srcAddr, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">dstAddr, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">blockSize&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;<a class="el" href="group__backup__restore__util.html#gabf644dc2e0ea262ddc4d72d416f3ee47">CC_UtilBackupAndRestore</a>(srcAddr, dstAddr, blockSize, <a class="el" href="group__cc__pal__types.html#gga7323bc031012d4ecc054f5ac4b9a1e76a6f15eba2bf45deaeaf625e9cad6492fa">CC_FALSE</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This macro is used for power management. Use it upon wakeup from suspended state, to restore the data that was backed up upon entry to suspended state. The source buffer is decrypted and verified with the session key. The restore operation must match a previous backup operation. Restoring must be done to the same address and with the same size that was previously backed up. </p>
<dl class="section note"><dt>Note</dt><dd>The session key cannot be replaced between matching backup and restore operations. </dd></dl>
<dl class="section user"><dt></dt><dd></dd></dl>
<dl class="section note"><dt>Note</dt><dd>If the FIPS certification support is set to ON, this function is also responsible for delivering the TEE FIPS status to the REE after waking up from suspended state.</dd></dl>
<dl class="section return"><dt>Returns</dt><dd><code>CC_OK</code> on success. </dd>
<dd>
A non-zero value from <a class="el" href="cc__util__error_8h.html" title="This file contains the error definitions of the CryptoCell utility APIs.">cc_util_error.h</a> on failure. </dd></dl>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="gabf644dc2e0ea262ddc4d72d416f3ee47"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gabf644dc2e0ea262ddc4d72d416f3ee47">&#9670;&nbsp;</a></span>CC_UtilBackupAndRestore()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="cc__pal__types__plat_8h.html#a0524980129b7e5ec9d0998ddab83dd1a">CCError_t</a> CC_UtilBackupAndRestore </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>pSrcBuff</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>pDstBuff</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>blockSize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="cc__pal__types__plat_8h.html#a6dcfa1fccae81f1dcfefe3229df69b6c">CCBool_t</a>&#160;</td>
          <td class="paramname"><em>isSramBackup</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function performs backup or restore of memory buffer, according to the flag it is given. It should not be called directly, but only through the <code>CC_UTIL_RAM_BACKUP</code> and <code>CC_UTIL_RAM_RESTORE</code> macros. </p>
<dl class="section return"><dt>Returns</dt><dd><code>CC_OK</code> on success. </dd>
<dd>
A non-zero value from <a class="el" href="cc__util__error_8h.html">cc_util_error.h</a> on failure. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">pSrcBuff</td><td>Host memory buffer to backup/restore from. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">pDstBuff</td><td>Host memory buffer for encrypted/decrypted data. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">blockSize</td><td>The size of the data to backup/restore (signature size not included) must be smaller than 64KB. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">isSramBackup</td><td>The operation type: <ul>
<li>
<code>CC_TRUE:</code> backup. </li>
<li>
<code>CC_FALSE:</code> restore.</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.9.1-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Copyright © 2001-2020 Arm Limited. All rights reserved. Non-Confidential.</li>
  </ul>
</div>
</body>
</html>
